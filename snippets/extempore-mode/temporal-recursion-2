# -*- mode: snippet -*-
# name: temporal-recursion-2
# key: tr2
# --
(define ${1:fun-name}
  (lambda (beat ${2:dur}$3)
    $0
    (callback (*metro* (+ beat (* .5 ${2:$(if (string= yas-text "dlist") "(car dlist)" yas-text)}))) '$1 (+ beat ${2:$(if (string= yas-text "dlist") "(car dlist)" yas-text)})${3:$(if yas-text (mapconcat (lambda (sym) (if (string-match "list" sym) (format "\n              (rotate -1 %s)" sym) (concat " " sym))) (split-string yas-text) "") "")})))

($1 (*metro* 'get-beat ${4:4}) ${5:1/4}$6)